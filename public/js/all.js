"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Img(){var i=new Image,t=void 0,e=function(e,s){t=s,i.src=e};return i.onload=function(){t(i)},{el:i,load:e}}function Counter(i){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],e={index:t,total:i,prev:0,next:0},s=function(){var i=arguments.length<=0||void 0===arguments[0]?1:arguments[0];e.index+=i,e.index>e.total-1&&(e.index=0),o()},n=function(){var i=arguments.length<=0||void 0===arguments[0]?1:arguments[0];e.index-=i,e.index<0&&(e.index=e.total-1),o()},o=function(){e.prev=e.index-1,e.next=e.index+1,e.prev<0&&(e.prev=e.total-1),e.next>e.total-1&&(e.next=0)};return o(),{inc:s,dec:n,props:e}}function ResizePositionProportionally(i,t,e,s){var n=e/s,o=n>i/t?t/s*1:i/e*1,r=e*o,p=s*o,h={width:r,height:p,left:(i>>1)-(r>>1),top:(t>>1)-(p>>1)};return h}var _createClass=function(){function i(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}return function(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}}(),OVERALL_MARGIN=40,MQ_MEDIUM=768,PADDING=OVERALL_MARGIN/2,SLIDE_INNER_SIZE={x:0,y:0},WINDOW={x:0,y:0},SLIDESHOW_INTERVAL=void 0,App=function(){function i(){var t=this;_classCallCheck(this,i),this.resize=this.resize.bind(this),this.props={},this.props.appContainer=document.getElementById("app-container"),this.props.infoContainer=document.getElementById("info-container"),this.props.topPart=this.props.appContainer.getElementsByClassName("top-part")[0],this.props.totalWidth=0,this.props.slides=[];var e=$(this.props.appContainer).find("ul#slides-container li").get();e.forEach(function(i,e){var s=new Slide(i);t.props.slides[e]=s});var s=$(this.props.appContainer).find("ul#slides-container").get(0);this.props.slidesContainer=new SlidesContainer(s,this.props.slides),this.props.infoContainer=new InfoContainer,this.props.header=new Header(this.props.infoContainer.trigger),this.props.footer=new Footer,$(window).on("resize",this.resize),this.resize(),this.props.footer.next(this.props.slidesContainer.counter.props),SLIDESHOW_INTERVAL=setInterval(function(){t.changeSlide()},3e3),setTimeout(function(){t.props.header.open()},1200),this.props.slides[0].open()}return _createClass(i,[{key:"changeSlide",value:function(){this.props.slidesContainer.next(),this.props.slides[this.props.slidesContainer.counter.props.prev].close(),this.props.slides[this.props.slidesContainer.counter.props.index].open(),this.props.footer.next(this.props.slidesContainer.counter.props)}},{key:"resize",value:function(){var i=this;WINDOW.x=window.innerWidth,WINDOW.y=window.innerHeight,PADDING=OVERALL_MARGIN/2,WINDOW.x=WINDOW.x,WINDOW.y=WINDOW.y,this.props.appContainer.style.width=WINDOW.x+"px",this.props.topPart.style.height=WINDOW.y+"px",this.props.totalWidth=0,this.props.slides.forEach(function(t,e){t.position(i.props.totalWidth,0),t.resize(),i.props.totalWidth+=WINDOW.x}),this.props.header.resize(),this.props.footer.resize(),this.props.slidesContainer.resize(),this.props.infoContainer.resize()}}]),i}(),Slide=function(){function i(t){var e=this;_classCallCheck(this,i),this.props={},this.props.el=t,this.props.imgPath=$(t).find("img").attr("src"),this.img={el:$(t).find("img").get(0),originalWidth:0,originalHeight:0};var s=Img();s.load(this.props.imgPath,function(i){e.img.originalWidth=i.width,e.img.originalHeight=i.height,e.resize()})}return _createClass(i,[{key:"open",value:function(){this.props.el.classList.add("active")}},{key:"close",value:function(){var i=this;setTimeout(function(){i.props.el.classList.remove("active")},0)}},{key:"position",value:function(i,t){this.props.el.style.left=i+"px",this.props.el.style.top=t+"px"}},{key:"resize",value:function(){this.props.el.style.width=WINDOW.x+"px",this.props.el.style.height=WINDOW.y+"px";var i=WINDOW.x,t=.7*WINDOW.y;WINDOW.x<MQ_MEDIUM&&(t=.6*WINDOW.y),WINDOW.y<720&&(t=.5*WINDOW.y);var e=this.img.originalWidth>this.img.originalHeight?i/this.img.originalWidth*1:t/this.img.originalHeight*1;WINDOW.x>MQ_MEDIUM&&(e=t/this.img.originalHeight*1);var s=this.img.originalWidth*e,n=this.img.originalHeight*e;this.img.el.style.width=s+"px",this.img.el.style.height=n+"px",this.img.el.style.left=(WINDOW.x>>1)-(s>>1)+"px",this.img.el.style.top=(WINDOW.y>>1)-(n>>1)+"px"}}]),i}(),SlidesContainer=function(){function i(t,e){_classCallCheck(this,i),this.props={},this.props.el=t,this.slides=e,this.counter=Counter(this.slides.length)}return _createClass(i,[{key:"next",value:function(){this.counter.inc();var i="translateX("+-WINDOW.x*this.counter.props.index+"px)";this.props.el.style.transform=i}},{key:"resize",value:function(){var i="translateX("+-WINDOW.x*this.counter.props.index+"px)";this.props.el.style.transform=i}}]),i}(),Header=function(){function i(t){_classCallCheck(this,i),this.props={},this.props.el=$(document).find("header").get(0),this.centerEl=$(this.props.el).find(".center-part").get(0),this.infoBtn=$(this.props.el).find(".right-part").get(0),$(this.infoBtn).on("click",t)}return _createClass(i,[{key:"open",value:function(){}},{key:"resize",value:function(){}}]),i}(),Footer=function(){function i(){_classCallCheck(this,i),this.props={},this.props.el=$(document).find("footer").get(0),this.props.items=$(this.props.el).find("li").get(),this.current=void 0,this.previous=void 0}return _createClass(i,[{key:"next",value:function(i){this.previous=this.current,this.current=this.props.items[i.index],this.previous&&this.previous.classList.remove("active"),this.current.classList.add("active")}},{key:"resize",value:function(){WINDOW.y>=600?this.props.el.style.top=WINDOW.y-$(this.props.items[0]).height()-OVERALL_MARGIN-PADDING+"px":this.props.el.style.top=WINDOW.y-$(this.props.items[0]).height()-OVERALL_MARGIN+"px"}}]),i}(),InfoContainer=function(){function i(){_classCallCheck(this,i),this.props={},this.props.el=$(document).find("#info-container").get(0),this.props.header=$("header").get(0),this.props.insideBlockEl=$(document).find("#info-container .inside-holder").get(0)}return _createClass(i,[{key:"resize",value:function(){this.props.insideBlockEl.style.height="auto",this.props.insideBlockEl.style.top=.55*WINDOW.y-($(this.props.insideBlockEl).height()>>1)+"px"}}]),i}();$(function(){new App});